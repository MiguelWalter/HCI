<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management System - Login</title>
    <style>
        html, body {
            height: 100%; /* Set height to 100% */
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f4f4f4; /* Light background for better readability */
            display: flex; /* Use flexbox */
            flex-direction: column; /* Arrange children in a column */
        }

        header {
            background: #2c3e50; /* Dark header */
            color: #ffffff;
            padding: 10px 0;
            text-align: center;
        }

        main {
            flex: 1; /* Allow main to grow and take available space */
            display: flex;
            justify-content: center; /* Center the containers */
            padding: 20px;
            gap: 20px; /* Space between the containers */
        }

        .container {
            background: #ffffff; /* White background for the container */
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            max-width: 400px; /* Limit the width of the login container */
            width: 100%; /* Full width for smaller screens */
        }

        .main-content {
            background: #ffffff; /* White background for the main content */
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            max-width: 800px; /* Limit the width of the main content */
            width: 100%; /* Full width for smaller screens */
        }

        h2 {
            color: #35424a; /* Dark color for section titles */
            text-align: center; /* Center the section titles */
        }

        ul {
            list-style-type: none; /* Remove default list styling */
            padding: 0; /* Remove padding */
        }

        footer {
            text-align: center;
            padding: 10px 0;
            background: #2c3e50; /* Dark footer */
            color: #ffffff;
            width: 100%;
        }

        /* Login Form Styles */
        #login-form {
            margin: 20px 0; /* Add margin for spacing */
        }

        input, select {
            width: calc(100% - 20px); /* Adjust width to account for padding */
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box; /* Include padding in width calculation */
        }

        button {
            background: #35424a;
            color: #ffffff;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            width: 100%; /* Make button full width */
        }

        button:hover {
            background: #45a049;
        }

        .register-section {
            display: none; /* Initially hidden */
            margin-top: 20px; /* Space above the registration section */
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <h1>Welcome to the User Management System</h1>
        <p>Your gateway to managing user information in our Learning Management System.</p>
    </header>

    <!-- Main Content Area -->
    <main>
        <!-- Login Container -->
        <div class="container">
            <h2>Login User</h2>
            <form id="loginUser Form"> <!-- Fixed ID here -->
                <input type="text" id="name" placeholder="Full Name" required>
                <input type="email" id="loginEmail" placeholder="Email" required>
                <select id="role" required>
                    <option value="">Select Role</option>
                    <option value="student">Student</option>
                    <option value="instructor">Instructor</option>
                    <option value="admin">Admin</option>
                </select>
                <button type="submit">Login</button>
            </form>
            <p>Don't have an account? <button id="createUser Btn">Create User</button></p>

            <!-- Registration Section -->
            <div class="register-section" id="registerSection">
                <h2>Create User</h2>
                <form id="createUser Form">
                    <input type="text" id="registerName" placeholder="Full Name" required>
                    <input type="email" id="registerEmail" placeholder="Email" required>
                    <select id="registerRole" required>
                        <option value="">Select Role</option>
                        <option value="student">Student</option>
                        <option value="instructor">Instructor</option>
                        <option value="admin">Admin</option>
                    </select>
                    <button type="submit">Create Account</button>
                </form>
            </div>
        </div>

        <!-- Main Content Container -->
        <div class="main-content">
            <h2>User Management System Overview</h2>
            <p>This User Management System is designed to facilitate user management within a Learning Management System (LMS). It allows for tracking user login status and assigning permissions based on user roles.</p>
            
            <h3>Key Features:</h3>
            <ul>
                <li><strong>User Object:</strong> Each user has a unique ID, full name, email address, role (student, instructor, or admin), preferences (theme and notification settings), and login status.</li>
                <li><strong>Role-Based Access Control (RBAC): </strong> 
                    <ul>
                        <li>Students can view courses.</li>
                        <li>Instructors can view courses and create new courses.</li>
                        <li>Admins can view courses, create courses, and manage users.</li>
                    </ul>
                </li>
                <li><strong>User Management:</strong> Create users, log them in or out, and update their preferences.</li>
                <li><strong>Permissions Management:</strong> Get user permissions based on their role and update roles as needed.</li>
            </ul>

            <h3>How It Works:</h3>
            <p>Users can register and log in to the system. The system checks for unique emails to prevent duplicate registrations. Once logged in, users can access features based on their assigned roles. Admins have the ability to manage all users, including changing roles and updating preferences.</p>

            <p>Explore the various sections of our portal to learn more about managing users effectively in an LMS environment!</p>
        </div>
    </main>

    <footer>
        <p>&copy; 2023 User Management System</p>
    </footer>

<script>
    // Example user data for demonstration
    let users = [
        {name: "John Doe", email: "john@example.com", role: "student" },
        {name: "Jane Smith", email: "jane@example.com", role: "instructor"},
        {name: "Miguel Uy", email: "miguel@example.com", role: "admin"}
    ];

    // Login form handling
    document.getElementById('loginUser Form').addEventListener('submit', function(event) { // Fixed ID here
        event.preventDefault();
        const name = document.getElementById('name').value;
        const email = document.getElementById('loginEmail').value;
        const role = document.getElementById('role').value;

        // Check if the user exists
        const user = users.find(user => user.email === email);

        if (user) {
            // Store user information in localStorage
            localStorage.setItem('user', JSON.stringify({ name: user.name, email: user.email, role: user.role }));
            
            // Redirect based on user role
            if (user.role === 'student') {
                window.location.href = 'home_student.html';
            } else if (user.role === 'instructor') {
                window.location.href = 'home_instructor.html';
            } else if (user.role === 'admin') {
                window.location.href = 'home_admin.html';
            }
        } else {
            alert('User  not found! Please check your email.');
        }
    });

    // Show registration section
    document.getElementById('createUser Btn').addEventListener('click', function() {
        const registerSection = document.getElementById('registerSection');
        registerSection.style.display = registerSection.style.display === 'none' || registerSection.style.display === '' ? 'block' : 'none';
    });

    // Create user form handling
    document.getElementById('createUser Form').addEventListener('submit', function(event) {
        event.preventDefault();
        const registerName = document.getElementById('registerName').value;
        const registerEmail = document.getElementById('registerEmail').value;
        const registerRole = document.getElementById('registerRole').value;

        // Check if the email already exists
        const existingUser  = users.find(user => user.email === registerEmail);
        if (existingUser ) {
            alert('Email already exists! Please use a different email.');
            return;
        }

        // Add new user to the users array
        users.push({ name: registerName, email: registerEmail, role: registerRole });
        alert('Account created successfully! You can now log in.');

        // Clear the registration form
        document.getElementById('createUser Form').reset();
        document.getElementById('registerSection').style.display = 'none'; // Hide the registration section
    });
</script>
</body>
</html>